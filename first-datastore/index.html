<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml"><title data-react-helmet="true">Your first Datastore | Dark Documentation</title><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Dark Documentation"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Your first Datastore | Dark Documentation"><meta data-react-helmet="true" name="description" content="In the last section, we made a HTTP request that created a 404. We&#x27;ll use _the"><meta data-react-helmet="true" property="og:description" content="In the last section, we made a HTTP request that created a 404. We&#x27;ll use _the"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/first-datastore"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/first-datastore"><link rel="stylesheet" href="/styles.f03e3bc4.css">
<link rel="preload" href="/styles.07077e44.js" as="script">
<link rel="preload" href="/runtime~main.971aee17.js" as="script">
<link rel="preload" href="/main.70223205.js" as="script">
<link rel="preload" href="/1.14df050a.js" as="script">
<link rel="preload" href="/2.b7a2668d.js" as="script">
<link rel="preload" href="/90.44038b43.js" as="script">
<link rel="preload" href="/91.fb068903.js" as="script">
<link rel="preload" href="/05c17924.1b0ba798.js" as="script">
<link rel="preload" href="/17896441.60fa8c2c.js" as="script">
<link rel="preload" href="/c5dbf550.50dc7f53.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand" to="https://darklang.com"><img class="navbar__logo" src="/img/favicon.ico" alt="Dark logo"><strong class="navbar__title">Dark</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand" to="https://darklang.com"><img class="navbar__logo" src="/img/favicon.ico" alt="Dark logo"><strong class="navbar__title">Dark</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a></li><li class="menu__list-item"><a class="menu__link" href="/slack-apps/slack-intro">Building Slack Apps</a></li><li class="menu__list-item"><a class="menu__link" href="/contributing/getting-started">Contributing</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Your first Datastore</h1></header><div class="markdown"><p>In the last section, we made a HTTP request that created a 404. We&#x27;ll use <em>the
trace</em> of that HTTP request to build an endpoint, a technique we call <strong>Trace
Driven Development</strong>.</p><ol><li>Hit the plus (+) button in the 404 section of the sidebar. This creates a
HTTP endpoint with the HTTP verb (POST) and path (/test) set from the request
that creates the 404.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.44.54_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.44.54_AM.png"></p><ol start="2"><li>Hover over the white dot on the left hand side. Here, you can see the full
body of the incoming trace from when you posted to the endpoint from the
REPL, including the body.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.45.57_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.45.57_AM.png"></p><ol start="3"><li>Let&#x27;s save the <code>request</code> body to a variable by typing
<code>let data = request.body</code>. As you can see, the autocomplete knows the field
names of <code>request</code> from the trace, and will complete them for you.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.47.10_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.47.10_AM.png"></p><ol start="4"><li>Let&#x27;s put this in a datastore. Like we saw with the <code>HttpClient</code> library,
typing &quot;DB&quot; in the blank will pull up all datastore functions.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.48.24_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.48.24_AM.png"></p><p>In this case, we want <code>DB::set</code>, which takes three arguments.</p><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.48.51_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.48.51_AM.png"></p><ol start="5"><li>Now let&#x27;s make our datastore. From the sidebar or the omnibox, create a new
datastore called &quot;Requests&quot;, with fields <code>data</code> and <code>time</code>.</li></ol><p><img src="/img/gettingstarted/datastore.png" alt="img/gettingstarted/datastore.png"></p><p>Dark&#x27;s datastores are key-value stores; each record has a unique key that is
used to store and retrieve the value. For instance, a possible set of records
with keys in the above datastore would look like this:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  key1: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          data: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  test: &quot;test2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          time: &lt;Date: 2020-02-11T18:54:39Z&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  key2: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          data: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  test: &quot;test1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          time: &lt;Date: 2020-02-11T18:54:43Z&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ol start="6"><li><p>Now that we have a datastore, let&#x27;s finish our post endpoint.</p><p>The first argument is the record we&#x27;re inserting. This needs to match the
schema, and so it needs to include both <code>date</code> and <code>time</code> (you cannot insert
records that are missing fields). Insert our data from above (seeing the live
value to the left) and use the <code>Date::now</code> function to get the <code>time</code> field.</p></li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.57.58_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.57.58_AM.png"></p><ol start="7"><li>We need a unique key for each record that we store. The <code>DB::generateKey</code>
function generates random keys – this is useful when your record has no
obvious unique identifier.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_10.59.24_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_10.59.24_AM.png"></p><ol start="8"><li>The final argument is the Datastore: <code>Requests</code>.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_11.00.04_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_11.00.04_AM.png"></p><ol start="9"><li>To call the <code>DB::set</code> function, we first need to run the two functions with
side effects (<code>DB::generateKey</code> and <code>Date::now</code>) by hitting the play button.
After hitting those two play buttons, the <code>DB::set</code> play button will be
enabled:</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_11.00.55_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_11.00.55_AM.png"></p><ol start="10"><li>Finally, hitting the play button for <code>DB::set</code> inserts the record into the
datastore. This locks the datastore, preventing us from changing the schema,
which we see indicated by the red lock (🔒) icon.</li></ol><p><img src="/img/gettingstarted/Screen_Shot_2020-02-11_at_11.01.32_AM.png" alt="img/gettingstarted/Screen_Shot_2020-02-11_at_11.01.32_AM.png"></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learning</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/launch/demo-video">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://youtube.com/c/Darklang/videos">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs/tutorials">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs/slack-apps">Building Slack Apps</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/about">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://dev.to/darklang">Dev Blog</a></li><li class="footer__item"><a href="https://medium.com/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://medium.com/darklang">Corp Blog</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/slack-invite">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://github.com/darklang/dark">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://github.com/darklang/docs">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/code-of-conduct">Code of Conduct</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Product</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/login">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/signup">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/desktop-client">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/mailing-list">Mailing List</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.07077e44.js"></script>
<script src="/runtime~main.971aee17.js"></script>
<script src="/main.70223205.js"></script>
<script src="/1.14df050a.js"></script>
<script src="/2.b7a2668d.js"></script>
<script src="/90.44038b43.js"></script>
<script src="/91.fb068903.js"></script>
<script src="/05c17924.1b0ba798.js"></script>
<script src="/17896441.60fa8c2c.js"></script>
<script src="/c5dbf550.50dc7f53.js"></script>
</body>
</html>