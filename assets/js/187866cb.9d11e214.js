"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6988],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=d(a),m=r,b=c["".concat(s,".").concat(m)]||c[m]||p[m]||i;return a?n.createElement(b,l(l({ref:t},u),{},{components:a})):n.createElement(b,l({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},59071:(e,t,a)=>{a.r(t),a.d(t,{frontMatter:()=>o,contentTitle:()=>s,metadata:()=>d,toc:()=>u,default:()=>c});var n=a(87462),r=a(63366),i=(a(67294),a(3905)),l=["components"],o={id:"airtable",title:"Airtable Sample",sidebar_label:"Airtable Sample"},s=void 0,d={unversionedId:"tutorials/airtable",id:"tutorials/airtable",isDocsHomePage:!1,title:"Airtable Sample",description:"This guide will walk you through how you can use Airtable\u2019s API to add or update",source:"@site/docs/tutorials/airtable.md",sourceDirName:"tutorials",slug:"/tutorials/airtable",permalink:"/tutorials/airtable",editUrl:"https://github.com/darklang/docs/edit/main/docs/tutorials/airtable.md",tags:[],version:"current",frontMatter:{id:"airtable",title:"Airtable Sample",sidebar_label:"Airtable Sample"},sidebar:"Tutorials",previous:{title:"Using an External DB",permalink:"/tutorials/external-db"},next:{title:"Freshdesk Sample",permalink:"/tutorials/freshdesk"}},u=[{value:"What You Need",id:"what-you-need",children:[],level:2},{value:"Sending Information From Airtable to Dark",id:"sending-information-from-airtable-to-dark",children:[],level:2},{value:"Putting Information From Airtable into a Dark Datastore",id:"putting-information-from-airtable-into-a-dark-datastore",children:[],level:2},{value:"Sending Information From Dark to Airtable",id:"sending-information-from-dark-to-airtable",children:[],level:2},{value:"Troubleshooting",id:"troubleshooting",children:[],level:2}],p={toc:u};function c(e){var t=e.components,o=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This guide will walk you through how you can use Airtable\u2019s API to add or update\ninformation in Airtable. An Airtable sample canvas is available\n",(0,i.kt)("a",{parentName:"p",href:"https://darklang.com/a/sample-airtable"},"here"),"."),(0,i.kt)("h2",{id:"what-you-need"},"What You Need"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"An Airtable account with a Base and table(s) already created. You will likely\nwant to plan what columns you will want to have in your Airtable ahead of\ntime."),(0,i.kt)("li",{parentName:"ul"},"Access to the ",(0,i.kt)("a",{parentName:"li",href:"https://airtable.com/api"},"Airtable API documentation"),"."),(0,i.kt)("li",{parentName:"ul"},"Access to your ",(0,i.kt)("a",{parentName:"li",href:"https://airtable.com/account"},"Airtable API key"),".")),(0,i.kt)("h2",{id:"sending-information-from-airtable-to-dark"},"Sending Information From Airtable to Dark"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Create a background worker to send data to Airtable."),(0,i.kt)("li",{parentName:"ul"},'Add your API key, the Airtable API, and the Airtable table you\u2019re going to\nuse. An Airtable table looks something like this:\n"appYPi96qgCwabzfE/Airtable%20Sample"'),(0,i.kt)("li",{parentName:"ul"},"We\u2019ll access the data over Airtable\u2019s JSON API. In Dark, we make HTTP calls\nusing ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::get"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Headers in Dark are passed in a dict, but we have convenience functions for\nthem, like ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::bearerToken")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::jsonContentType"),". You\ncan inspect the headers by clicking on ",(0,i.kt)("inlineCode",{parentName:"li"},"header")," to see it\u2019s live value."),(0,i.kt)("li",{parentName:"ul"},"To test out the API call, press the Play button."))),(0,i.kt)("li",{parentName:"ul"},"If you only want one field, like the Name field, you will want to add \u201cRecord\nType\u201d to your table. To get the exact string for this, reference the Retrieve\na Record section of your\n",(0,i.kt)("a",{parentName:"li",href:"https://airtable.com/api"},"Airtable API documentation"),".")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image5.png",src:a(17620).Z})),(0,i.kt)("h2",{id:"putting-information-from-airtable-into-a-dark-datastore"},"Putting Information From Airtable into a Dark Datastore"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Create a Dark datastore and populate it with the fields you need.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image1.png",src:a(79626).Z})),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Next iterate through the results - held in ",(0,i.kt)("inlineCode",{parentName:"li"},"allData.body.records"),", and add\nthem to the DB using ",(0,i.kt)("inlineCode",{parentName:"li"},"DB::set"),".")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image4.png",src:a(69842).Z})),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Click the play button - your datastore will update.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image2.png",src:a(96830).Z})),(0,i.kt)("h2",{id:"sending-information-from-dark-to-airtable"},"Sending Information From Dark to Airtable"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Create a background worker to send data to Airtable."),(0,i.kt)("li",{parentName:"ul"},"Add your API key, the Airtable API, and the Airtable table you\u2019re going to\nuse. An Airtable table looks something like this:\nappYPi96qgCwabzfE/Airtable%20Sample"),(0,i.kt)("li",{parentName:"ul"},"We\u2019ll access the data over Airtable\u2019s JSON API. In Dark, we make HTTP calls\nusing ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::get"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Headers in Dark are passed in a dict, but we have convenience functions for\nthem, like ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::bearerToken")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::jsonContentType"),". You\ncan inspect the headers by clicking on \u2018header\u2019 to see it\u2019s live value."),(0,i.kt)("li",{parentName:"ul"},"To test out the API call, press the Play button."))),(0,i.kt)("li",{parentName:"ul"},"Create your ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpClient::post")," call. Note that to add a new entry, you will\nneed to format your data using ",(0,i.kt)("inlineCode",{parentName:"li"},"records")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"fields"),". You can click the Play\nbutton next to post to manually populate your Airtable to check if its\nworking. Here, I\u2019ve added one entry, but you can replace the strings with\nvariables to add data however you would like.")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image6.png",src:a(32714).Z})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image7.png",src:a(95455).Z})),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Field/column names in Airtable are case sensitive, so make sure your cases\nmatch everywhere."),(0,i.kt)("li",{parentName:"ul"},"Airtable will send over completely empty entries, so if it looks like you\u2019re\ngetting too much data, verify that you don\u2019t have an extra row in your table,\nlike this one:")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"airtable/image3.png",src:a(66816).Z})))}c.isMDXComponent=!0},79626:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image1-a475adfa17c9333df8f1dcf7c8bc5d2a.png"},96830:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image2-3cba18bd76e7e67e22079e110a4b6fab.png"},66816:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image3-4faf1975c0ed82ecc80483ef0b3f801b.png"},69842:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image4-16028584df8c42dfad72dddc10bf86d6.png"},17620:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image5-3ffb62eb1778cdd425ad31c21fc1c0f3.png"},32714:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image6-adb18e54caf241e7891f990ba3f74c2d.png"},95455:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image7-9a1830cef1519afdd777df2157d7069d.png"}}]);