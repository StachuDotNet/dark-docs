"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1945],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),k=r,m=d["".concat(s,".").concat(k)]||d[k]||u[k]||o;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},92218:(e,t,a)=>{a.r(t),a.d(t,{frontMatter:()=>l,contentTitle:()=>s,metadata:()=>p,toc:()=>c,default:()=>d});var n=a(87462),r=a(63366),o=(a(67294),a(3905)),i=["components"],l={id:"slack-oauth",title:"Setting Up OAuth",sidebar_label:"Setting Up OAuth"},s=void 0,p={unversionedId:"slack-apps/slack-oauth",id:"slack-apps/slack-oauth",isDocsHomePage:!1,title:"Setting Up OAuth",description:"In order to install your app across multiple Slack workspaces, you will need to",source:"@site/docs/slack-apps/slack-oauth.md",sourceDirName:"slack-apps",slug:"/slack-apps/slack-oauth",permalink:"/slack-apps/slack-oauth",editUrl:"https://github.com/darklang/docs/edit/main/docs/slack-apps/slack-oauth.md",tags:[],version:"current",frontMatter:{id:"slack-oauth",title:"Setting Up OAuth",sidebar_label:"Setting Up OAuth"},sidebar:"Slack",previous:{title:"Your First Slack App",permalink:"/slack-apps/slack-intro"},next:{title:"Slack Packages",permalink:"/slack-apps/slack-packages"}},c=[],u={toc:c};function d(e){var t=e.components,l=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In order to install your app across multiple Slack workspaces, you will need to\nset up OAuth. If you're not familiar with OAuth, the basic explanation is that\nyour app needs to go through a few steps to verify that it is allowed to access\na workspace. The three steps are:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Asking for scopes"),(0,o.kt)("li",{parentName:"ol"},"Waiting for a user to approve your requested scopes"),(0,o.kt)("li",{parentName:"ol"},"Exchanging a temporary authorization code for an access token")),(0,o.kt)("p",null,"You may be familiar with this workflow without even knowing it - it's likely\nwhat occurs anytime you see a screen this like when trying to install something:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"permissions.png",src:a(64234).Z})),(0,o.kt)("p",null,"In order to set up OAuth on your Slack app, you will need to take a few steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Go to your Slack app's ",(0,o.kt)("strong",{parentName:"li"},"Manage Distribution")," page and add an OAuth redirect\nURL:")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"oauthredirect.png",src:a(66615).Z})),(0,o.kt)("p",null,"This URL should be in the following format: The URL you provide will need to be\nin the following format:\n",(0,o.kt)("a",{parentName:"p",href:"https://USERNAME-CANVASNAME.builtwithdark.com/oauth-redirect"},"https://USERNAME-CANVASNAME.builtwithdark.com/oauth-redirect")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Return to the main ",(0,o.kt)("strong",{parentName:"p"},"Manage Distribution")," page, copy the Sharable URL and\nthen navigate to it. Follow the steps, making sure to finish with clicking\nAllow.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to your Dark canvas and look in your 404s list to find your\n",(0,o.kt)("inlineCode",{parentName:"p"},"oauth-redirect")," handler, complete with trace. Click the ",(0,o.kt)("inlineCode",{parentName:"p"},"+")," to add it to\nyour canvas.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a new Datastore called ",(0,o.kt)("inlineCode",{parentName:"p"},"tokenStore"),", and add two ",(0,o.kt)("inlineCode",{parentName:"p"},"String")," fields:\n",(0,o.kt)("inlineCode",{parentName:"p"},"team_id")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Return to your ",(0,o.kt)("inlineCode",{parentName:"p"},"oauth-redirect")," handler and call the\n",(0,o.kt)("a",{parentName:"p",href:"./slack-packages#oauth"},(0,o.kt)("inlineCode",{parentName:"a"},"Slack::oauth")," function"),". You will need your client\nID and client secret, as well as the token store you created in the previous\nstep. The final parameter is pulling the temporary code out of the request\nusing ",(0,o.kt)("inlineCode",{parentName:"p"},"request.queryParams.code"),"."))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"oauth.png",src:a(68104).Z})),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},"Hit the play button for the function. If you get an error, repeat step 2. If\neverything goes as expected, an entry will be added to your datastore, and it\nwill look locked.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"lockedtoken.png",src:a(51124).Z})))}d.isMDXComponent=!0},51124:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/lockedtoken-7d78b8d1af7d5eace5359e2267ba7205.png"},68104:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauth-c422cf7b4a1158c61b5067d0f1ae7ba2.png"},66615:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauthredirect-6811fa6b78da8826dfced1074384320a.png"},64234:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/permissions-b3860018f274348090d9a1bc98039c6a.png"}}]);