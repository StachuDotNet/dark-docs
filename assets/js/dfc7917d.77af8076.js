"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2502],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=s(n),f=r,m=u["".concat(l,".").concat(f)]||u[f]||d[f]||o;return n?a.createElement(m,i(i({ref:t},p),{},{components:n})):a.createElement(m,i({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},91724:(e,t,n)=>{n.r(t),n.d(t,{frontMatter:()=>c,contentTitle:()=>l,metadata:()=>s,toc:()=>p,default:()=>u});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],c={id:"first-function",title:"Your first Function"},l=void 0,s={unversionedId:"first-function",id:"first-function",isDocsHomePage:!1,title:"Your first Function",description:"Let's look at creating a function to return a human readable summary of the",source:"@site/docs/first-function.md",sourceDirName:".",slug:"/first-function",permalink:"/first-function",editUrl:"https://github.com/darklang/docs/edit/main/docs/first-function.md",tags:[],version:"current",frontMatter:{id:"first-function",title:"Your first Function"}},p=[],d={toc:p};function u(e){var t=e.components,c=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,c,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Let's look at creating a function to return a human readable summary of the\nnumber of reports for each day."),(0,o.kt)("p",null,"The best way to create a function is by writing the code you want as part of\nyour handler, and then extracting the working code to a function. This ensures\nthat whatever code you write has traces and live data."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Start by creating a new REPL.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the REPL, call ",(0,o.kt)("inlineCode",{parentName:"p"},"DB::getAll")," to get the reports from the datastore. Run the\nfunction using the play button (\u25b6\ufe0f)."))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(29607).Z})),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Open a pipeline by typing ",(0,o.kt)("inlineCode",{parentName:"li"},"|>"),", and pipe into a ",(0,o.kt)("inlineCode",{parentName:"li"},"List::map"),", and create\nvariables ",(0,o.kt)("inlineCode",{parentName:"li"},"date")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"count"),".")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(9042).Z})),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"Pipe ",(0,o.kt)("inlineCode",{parentName:"li"},"val.count")," into ",(0,o.kt)("inlineCode",{parentName:"li"},"toString")," (shift-enter on a selected area also pipes\nthat expression).")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(78574).Z})),(0,o.kt)("ol",{start:5},(0,o.kt)("li",{parentName:"ol"},"Return ",(0,o.kt)("inlineCode",{parentName:"li"},'date ++ ": " ++ count')," in the last line of the block.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(75198).Z})),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"We now have the code to generate our formatted report."),(0,o.kt)("p",{parentName:"li"},"Let's extract that code into a function. Select all the code within the REPL."))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(11604).Z})),(0,o.kt)("ol",{start:7},(0,o.kt)("li",{parentName:"ol"},"Type ",(0,o.kt)("inlineCode",{parentName:"li"},"Ctrl-\\")," (Control-Backslash) to open the command palette, then select\n",(0,o.kt)("inlineCode",{parentName:"li"},"extract-function"),".")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(63289).Z})),(0,o.kt)("ol",{start:8},(0,o.kt)("li",{parentName:"ol"},"This creates the function, and replaces the existing code with a call to the\nnew function.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(45424).Z})),(0,o.kt)("ol",{start:9},(0,o.kt)("li",{parentName:"ol"},"Click on the function reference on the right hand side of the handler to go\nto the function and rename it.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(59676).Z})),(0,o.kt)("p",null,"Functions do not live on the main canvas. They are reusable and can be called\nfrom any handler."),(0,o.kt)("p",null,"This function does not have any parameters. When you add parameters, the editor\nwill automatically create blanks for the arguments everywhere the function is\ncalled."),(0,o.kt)("ol",{start:10},(0,o.kt)("li",{parentName:"ol"},"Go back to the primary canvas via the sidebar, the mini-map, or a reference\non the right-hand-side of the function. Once back, create a new HTTP GET\nhandler and call the function. This creates an API endpoint which returns\nthe daily reports.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"gettingstarted/newworker.png",src:n(88492).Z})))}u.isMDXComponent=!0},75198:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/blockend-d094c72b13df470fb6a58bc9cdc7ac21.png"},29607:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dbgetalldaily-0235edadce463fc4a6460bef43beb492.png"},45424:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/extractedfunction-fed2381a77887ecfa7cc1ecc0d28d6d9.png"},63289:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/extractfunction-180da21eda6eedac4909710b54f9d018.png"},88492:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/functioncall-6e7facf6dbfa762b5c0d04cf5e2c6039.png"},9042:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/functionmapvariable-dab7ae5bd3a2b471e551c4a3c965db00.png"},59676:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/functionspace-ff35a482e6bbc917dc2207e1abad6b0f.png"},11604:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/selectall-84b442d6952553ab5aa26346308c7dc3.png"},78574:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/valcounttostring-fdc1a8039875e32a597b3e971475504c.png"}}]);