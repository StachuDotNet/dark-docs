(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{226:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var a=n(2),r=n(11),i=(n(0),n(241)),o={id:"feature-flags",title:"Use Feature Flags",sidebar_label:"Use Feature Flags"},l={id:"feature-flags",isDocsHomePage:!1,title:"Use Feature Flags",description:"In Dark, all changes are made in production, on your real infrastructure. If",source:"@site/docs/feature-flags.md",permalink:"/feature-flags",sidebar_label:"Use Feature Flags",sidebar:"docs",previous:{title:"Work with your team",permalink:"/teamwork"},next:{title:"Writing Tests",permalink:"/writing-tests"}},c=[{value:"Build a first version",id:"build-a-first-version",children:[]},{value:"Add a Feature Flag",id:"add-a-feature-flag",children:[]},{value:"Choose a &quot;When&quot; Condition",id:"choose-a-when-condition",children:[]},{value:"Write New Code",id:"write-new-code",children:[]},{value:"Edit Condition &amp; Code",id:"edit-condition--code",children:[]},{value:"Commit or Discard",id:"commit-or-discard",children:[]},{value:"Limitations",id:"limitations",children:[]}],u={rightToc:c};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"In Dark, all changes are made in production, on your real infrastructure. If\nyou'd like to develop for testing, without things immediately going to users,\nmake the changes within a feature flag."),Object(i.b)("h2",{id:"build-a-first-version"},"Build a first version"),Object(i.b)("p",null,"Before you have users, you can just write code within handlers."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/write.png",alt:"Feature Flag"}))),Object(i.b)("h2",{id:"add-a-feature-flag"},"Add a Feature Flag"),Object(i.b)("p",null,"Open the command palette while selecting the code you want to modify (",Object(i.b)("inlineCode",{parentName:"p"},"ctrl-\\"),"\nor ",Object(i.b)("inlineCode",{parentName:"p"},"alt-x"),'). In this case, "hello world."'),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/add.png",alt:"Feature Flag"}))),Object(i.b)("h2",{id:"choose-a-when-condition"},'Choose a "When" Condition'),Object(i.b)("p",null,'By default, the code you write within the flag will not be run. All traffic will\nstill see the result of "Hello World." To have your new code run, specify a\ncondition.'),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/when.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"In this case, the new code will run if the traffic specifies a ",Object(i.b)("inlineCode",{parentName:"p"},"queryParam"),"\n",Object(i.b)("inlineCode",{parentName:"p"},"name=Ellen"),"."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/whenellen.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"Since the new execution code has not been written, if you run the code with\n",Object(i.b)("inlineCode",{parentName:"p"},"name=Ellen")," an error results."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/error.png",alt:"Feature Flag"}))),Object(i.b)("h2",{id:"write-new-code"},"Write New Code"),Object(i.b)("p",null,"Write new code for the section you're looking to change, and try it out."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/newcode.png",alt:"Feature Flag"}))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/newexecution.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"For any case other than the specific condition, the old code will continue to\nrun."),Object(i.b)("p",null,"For instance, if another name is chosen in the query param:\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/whensam.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"Or if there is not a name: ",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/whenblank.png",alt:"Feature Flag"}))),Object(i.b)("h2",{id:"edit-condition--code"},"Edit Condition & Code"),Object(i.b)("p",null,"Adjust the condition to test any additional cases, or write more code."),Object(i.b)("p",null,"Running the new code for any name: ",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/notnull.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"Making the new code take into account if a name exists or not:\n",Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/additionallogic.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"Live values and traces work for analysis within feature flags, but still appear\nto the left of the original code."),Object(i.b)("h2",{id:"commit-or-discard"},"Commit or Discard"),Object(i.b)("p",null,"Once you're done, re-open the command palette (",Object(i.b)("inlineCode",{parentName:"p"},"ctrl-\\")," or ",Object(i.b)("inlineCode",{parentName:"p"},"alt-x")," and commit or\ndiscard the code)."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/commit.png",alt:"Feature Flag"}))),Object(i.b)("p",null,"When you commit, the feature flag code now runs for all cases. When you discard,\nyou return to the previous version of the code."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/img/featureflag/committed.png",alt:"Feature Flag"}))),Object(i.b)("h2",{id:"limitations"},"Limitations"),Object(i.b)("p",null,"Currently, you can only have one feature flag per component. There is not yet a\nway to see the past history of flags (instead they are just part of the undo\nstack, ",Object(i.b)("inlineCode",{parentName:"p"},"cmd-z")," or ",Object(i.b)("inlineCode",{parentName:"p"},"ctrl-z"),".)"))}b.isMDXComponent=!0},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=r.a.createContext({}),b=function(e){var t=r.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=b(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=b(n),s=a,f=p["".concat(o,".").concat(s)]||p[s]||d[s]||i;return n?r.a.createElement(f,l(l({ref:t},u),{},{components:n})):r.a.createElement(f,l({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=s;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"}}]);