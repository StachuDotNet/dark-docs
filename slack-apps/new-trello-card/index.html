<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159199190-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Dark Documentation" href="/opensearch.xml">
<link rel="preconnect" href="https://cdn.heapanalytics.com">
<link rel="dns-prefetch" href="https://cdn.heapanalytics.com">
<script>window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.heapanalytics.com/js/heap-"+e+".js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a);for(var n=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],o=0;o<p.length;o++)heap[p[o]]=n(p[o])},heap.load(477722926)</script>
<link rel="preconnect" href="https://cdn.heysavvy.com">
<link rel="dns-prefetch" href="https://cdn.heysavvy.com"><title data-react-helmet="true">Create a New Trello Card from Slack | Dark Documentation</title><meta data-react-helmet="true" property="og:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" property="twitter:image" content="https://docs.darklang.com/img/favicon.ico"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Dark Documentation"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Create a New Trello Card from Slack | Dark Documentation"><meta data-react-helmet="true" name="description" content="Connecting your Trello account with your Slack account can make for a powerful"><meta data-react-helmet="true" property="og:description" content="Connecting your Trello account with your Slack account can make for a powerful"><meta data-react-helmet="true" property="og:url" content="https://docs.darklang.com/slack-apps/new-trello-card"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.darklang.com/slack-apps/new-trello-card"><link rel="stylesheet" href="/styles.f03e3bc4.css">
<link rel="preload" href="/styles.b6abea9f.js" as="script">
<link rel="preload" href="/runtime~main.eda6e8a4.js" as="script">
<link rel="preload" href="/main.0bfde88f.js" as="script">
<link rel="preload" href="/1.14df050a.js" as="script">
<link rel="preload" href="/2.f2b5852c.js" as="script">
<link rel="preload" href="/90.44038b43.js" as="script">
<link rel="preload" href="/91.fb068903.js" as="script">
<link rel="preload" href="/05c17924.108d5dce.js" as="script">
<link rel="preload" href="/17896441.60fa8c2c.js" as="script">
<link rel="preload" href="/a0b892bf.e070ffd7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand" to="https://darklang.com"><img class="navbar__logo" src="/img/favicon.ico" alt="Dark logo"><strong class="navbar__title">Dark</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction">Documentation</a><a class="navbar__item navbar__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a><a class="navbar__item navbar__link" href="/slack-apps/slack-intro">Building Slack Apps</a><a class="navbar__item navbar__link" href="/contributing/getting-started">Contributing</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://darklang.com" target="_blank" rel="noopener noreferrer" class="navbar__brand" to="https://darklang.com"><img class="navbar__logo" src="/img/favicon.ico" alt="Dark logo"><strong class="navbar__title">Dark</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/tutorial-intro">Tutorials &amp; Samples</a></li><li class="menu__list-item"><a class="menu__link" href="/slack-apps/slack-intro">Building Slack Apps</a></li><li class="menu__list-item"><a class="menu__link" href="/contributing/getting-started">Contributing</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Create a New Trello Card from Slack</h1></header><div class="markdown"><p>Connecting your Trello account with your Slack account can make for a powerful
tool - no more switching tabs and hunting for the right Trello list when you
want to capture the excellent idea that just came up. In this tutorial, we&#x27;ll
show you a few ways to enable your team to create new Trello cards directly from
Slack.</p><p>A <a href="https://darklang.com/a/sample-createnewtrellocard" target="_blank" rel="noopener noreferrer">sample canvas</a> for this
tutorial is available.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="trello-configuration"></a>Trello Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#trello-configuration" title="Direct link to heading">#</a></h2><p>For this tutorial, you&#x27;re going to need to grab a few different things from
Trello and store each of them as separate functions in Dark:</p><p>-Your Trello API Key and Token,
<a href="https://trello.com/app-key/" target="_blank" rel="noopener noreferrer">available on this page</a> -Your Trello org id, the
id for one of your boards, and the id for one of your lists. The best way to get
all of these at once is to add <code>.json</code> to the end of the URL on one of your
boards, and search through the resulting JSON for the <code>id</code> that matches with the
name of your board, the <code>id</code> that matches with the name of the list you&#x27;d like
to use and <code>idOrganization</code>. Don&#x27;t worry - we&#x27;ll cover an easier way to handle
this later in the tutorial.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="slack-configuration"></a>Slack Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#slack-configuration" title="Direct link to heading">#</a></h2><ol><li><a href="https://api.slack.com/apps" target="_blank" rel="noopener noreferrer">Create a new app in Slack</a>.</li><li>Set a Slash command (the option should appear under <strong>Add features &amp;
functionality</strong> on your app&#x27;s main page.)</li></ol><p><img src="/img/slack-apps/tutorials/new-trello-card/slashcommand.png" alt="slack-apps/tutorials/new-trello-card/slashcommand.png"></p><ol start="3"><li>Add the following scopes to your app.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.43.45_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.43.45_PM.png"></p><ol start="3"><li><p>Install your app to the workspace (either via <strong>Settings -&gt; Basic
Information</strong> or <strong>Settings -&gt; Install App</strong>). Since this app is being built
for your workspace specifically, we will not need to set up full OAuth, like
we would if we wanted to distribute this more publicly.</p></li><li><p>Copy your bot user access token, which will now be available under <strong>Settings
-&gt; Install</strong> app and save it as a function in your Dark canvas. Use this
function wherever you see <code>token</code> in the code examples.</p></li><li><p>Attempt to use your slash command - you will see an error.</p></li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.45.07_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.45.07_PM.png"></p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.52.08_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.52.08_PM.png"></p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.45.14_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.45.14_PM.png"></p><ol start="6"><li>Navigate to your Dark canvas and check the 404s box - you should see an HTTP
POST created. Click the plus sign to add it to your canvas.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.45.29_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.45.29_PM.png"></p><ol start="7"><li>Once it&#x27;s on your canvas, you can place your carat over the trace on the left
(the white dot) to see the incoming data Slack attempted to send.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.48.50_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.48.50_PM.png"></p><ol start="8"><li>In the body of your trace data, you will see a text field in the body. This
is what we want to parse to get the name and description of the card we&#x27;re
going to create. In order to parse this information, we&#x27;re going to use
<code>String::split</code> and parse on the special character <code>|</code>.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.53.21_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.53.21_PM.png"></p><ol start="9"><li>Now that we have a list of <code>messageContent</code>, we can use <code>List::getAt</code> to set
the name and description of the card.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.54.04_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.54.04_PM.png"></p><ol start="10"><li>Once we have all of the information we need, we can use the Dark package
manager <code>Trello::createNewCard</code> function to create the new card. For
simplicity&#x27;s sake, we&#x27;re going to use the <code>defaultListID</code> we set earlier.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.54.46_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.54.46_PM.png"></p><ol start="11"><li>Re-run your HTTP handler, or call the slash command again and then check
Trello - your new card will be there!</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.54.58_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_1.54.58_PM.png"></p><ol start="12"><li>Now, you probably don&#x27;t want to have to worry about setting up a default
list or hunting for the list ids in JSON. Create a Lists db.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.05.32_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.05.32_PM.png"></p><ol start="13"><li>Now, we can use built in Dark package manager functions to get a list of all
of our Trello lists and add them to our DB.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.07.17_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.07.17_PM.png"></p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.07.33_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.07.33_PM.png"></p><ol start="14"><li>Let&#x27;s try another slash command, this time with more information.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.09.04_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.09.04_PM.png"></p><ol start="15"><li>Now our <code>messageContent</code> will have a third entry in the list.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.09.50_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.09.50_PM.png"></p><ol start="16"><li>Now, using the built in <code>Trello:lookUpListID</code> function, we can grab the name
of that list and use it in our <code>createNewCard</code> function.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_1.34.24_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_1.34.24_PM.png"></p><ol start="17"><li>Okay, this is all great, but still has some problems. What if someone
forgets to add the right special character? Let&#x27;s make it a little easier,
by creating a modal to take their information.</li></ol><p>First, let&#x27;s create a new slash command:</p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.59.02_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.59.02_PM.png"></p><p>You&#x27;re also going to want to turn Interactivity on and specify a URL for the
interaction to be sent to:</p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.03.32_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.03.32_PM.png"></p><ol start="18"><li>Now, just like before, we&#x27;re going to call the Slash command and grab
the 404.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.59.38_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_2.59.38_PM.png"></p><ol start="19"><li>First, grab your <code>trigger_id</code> from the <code>request.body</code>:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.01.13_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.01.13_PM.png"></p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.01.31_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.01.31_PM.png"></p><ol start="20"><li>Next, create an <code>HttpClient::post</code> request and add your <code>trigger_id</code> and
JSON. These are truncated screenshots with a lot of the JSON cut out:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.01.41_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.01.41_PM.png"></p><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.02.04_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-07_at_3.02.04_PM.png"></p><ol start="21"><li>Now, try your Slash command - a modal should open. Input text and try to
send. You will get an error message:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.06.48_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.06.48_PM.png"></p><ol start="22"><li>Now we need to work with our <code>/interaction</code> handler, which should be
available in your 404s. We&#x27;re going to start with parsing the payload Slack
sent through:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.09.56_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.09.56_PM.png"></p><ol start="23"><li>Now we can use that payload to grab the information that you submitted in
your modal:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.17.50_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.17.50_PM.png"></p><ol start="24"><li>And, just like before, we&#x27;ll use the <code>Trello::lookUpListID</code> to take the
list:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.17.57_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.17.57_PM.png"></p><ol start="25"><li>And now all that&#x27;s left is creating the new card and sending a 200 response
back to Slack:</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.18.11_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.18.11_PM.png"></p><ol start="26"><li>Try to create another ticket.</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.18.30_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.18.30_PM.png"></p><ol start="27"><li>Once you hit submit, your ticket will appear in Trello!</li></ol><p><img src="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.18.45_PM.png" alt="New%20Trello%20Card/Screen_Shot_2020-04-08_at_12.18.45_PM.png"></p><p>Congratulations, you now have a Slack app that can create Trello cards in
multiple ways!</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trello-configuration" class="table-of-contents__link">Trello Configuration</a></li><li><a href="#slack-configuration" class="table-of-contents__link">Slack Configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learning</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/launch/demo-video" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/launch/demo-video">Demo Video</a></li><li class="footer__item"><a href="https://youtube.com/c/Darklang/videos" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://youtube.com/c/Darklang/videos">Tutorial Videos</a></li><li class="footer__item"><a href="https://darklang.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs">Docs</a></li><li class="footer__item"><a href="https://darklang.com/docs/tutorials" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs/tutorials">Tutorials &amp; Samples</a></li><li class="footer__item"><a href="https://darklang.com/docs/slack-apps" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/docs/slack-apps">Building Slack Apps</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/about">Company</a></li><li class="footer__item"><a href="https://dev.to/darklang" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://dev.to/darklang">Dev Blog</a></li><li class="footer__item"><a href="https://blog.darklang.com" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://blog.darklang.com">Corp Blog</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/slack-invite" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/slack-invite">Community Slack</a></li><li class="footer__item"><a href="https://github.com/darklang/dark" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://github.com/darklang/dark">Dark Repo</a></li><li class="footer__item"><a href="https://github.com/darklang/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://github.com/darklang/docs">Docs Repo</a></li><li class="footer__item"><a class="footer__link-item" href="/contributing/getting-started">Contributor Docs</a></li><li class="footer__item"><a href="https://darklang.com/code-of-conduct" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/code-of-conduct">Code of Conduct</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Product</h4><ul class="footer__items"><li class="footer__item"><a href="https://darklang.com/login" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/login">Sign in</a></li><li class="footer__item"><a href="https://darklang.com/signup" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/signup">Sign up</a></li><li class="footer__item"><a href="https://darklang.com/desktop-client" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/desktop-client">Desktop Client</a></li><li class="footer__item"><a href="https://darklang.com/mailing-list" target="_blank" rel="noopener noreferrer" class="footer__link-item" to="https://darklang.com/mailing-list">Mailing List</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Dark Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.b6abea9f.js"></script>
<script src="/runtime~main.eda6e8a4.js"></script>
<script src="/main.0bfde88f.js"></script>
<script src="/1.14df050a.js"></script>
<script src="/2.f2b5852c.js"></script>
<script src="/90.44038b43.js"></script>
<script src="/91.fb068903.js"></script>
<script src="/05c17924.108d5dce.js"></script>
<script src="/17896441.60fa8c2c.js"></script>
<script src="/a0b892bf.e070ffd7.js"></script>
<script async="true" defer="true" src="https://cdn.heysavvy.com/wc/savvy.min.js"></script>
        <savvy-smart-form id="6HBmUjmI12nCuopyvB0B"></savvy-smart-form></body>
</html>