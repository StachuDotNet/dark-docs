(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{211:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(11),o=(n(0),n(241)),l={id:"dark-backend-components",title:"Components",sidebar_label:"Components"},c={id:"dark-backend-components",isDocsHomePage:!1,title:"Components",description:"When building in Dark, you are able to create five major backend components,",source:"@site/docs/dark-backend-components.md",permalink:"/dark-backend-components",sidebar_label:"Components",sidebar:"docs",previous:{title:"When should you use Dark?",permalink:"/when-dark"},next:{title:"Trace Driven Development",permalink:"/trace-driven-development"}},i=[{value:"Canvas",id:"canvas",children:[]},{value:"REST API Endpoints",id:"rest-api-endpoints",children:[]},{value:"Background Workers",id:"background-workers",children:[]},{value:"CRON",id:"cron",children:[]},{value:"REPL",id:"repl",children:[]},{value:"Persistent Datastores",id:"persistent-datastores",children:[]},{value:"Deleted",id:"deleted",children:[]}],s={rightToc:i};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"When building in Dark, you are able to create five major backend components,\ncalled handlers:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"API Endpoints (REST)"),Object(o.b)("li",{parentName:"ul"},"Background workers (with built in event/queue system)"),Object(o.b)("li",{parentName:"ul"},"Scheduled jobs/cron"),Object(o.b)("li",{parentName:"ul"},"Persistent Datastores (key-value/hash-map)"),Object(o.b)("li",{parentName:"ul"},"REPLs (internal tools)")),Object(o.b)("p",null,"These components live on your canvas. They are created from the sidebar, or by\nhitting ",Object(o.b)("inlineCode",{parentName:"p"},"Cmd/Ctrl-k")," to bring up the omnibox."),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"/docs/img/backend/image2.png",alt:"assests/backend/image2.png"}))),Object(o.b)("p",null,"Dark code is meant to be written in these handlers. We always recommend writing\ncode within these components, and then extracting that code into a function,\nusing ",Object(o.b)("inlineCode",{parentName:"p"},"Cmd/Ctrl-\\"),", as needed. Code written in Dark is expression based, and as\nyou add an expression it will automatically create blanks for the parameters it\ntakes. If you delete an expression, the parameters will also be removed."),Object(o.b)("p",null,"These components ",Object(o.b)("strong",{parentName:"p"},"do not")," require you to set up any additional infrastructure\nor deployment processes. As soon as you create them, they\u2019re available and\nupdate as you write code (deployless). Each handler is of one of these types,\nand has a name as well as additional information. You can see examples of each\ncomponent ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://darklang.com/a/sample-helloworld"}),"here"),"."),Object(o.b)("p",null,"All of these components support core Dark functionality:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Trace data & live values (see:\n",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/trace-driven-development"}),"Trace Driven Development"),")."),Object(o.b)("li",{parentName:"ul"},"Implicit returns & pipelines (see:\n",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/functional-aspects"}),"Functional Aspects of Dark"),")."),Object(o.b)("li",{parentName:"ul"},"Autocomplete (i.e. typing ",Object(o.b)("strong",{parentName:"li"},"DB::"),") will return all the datastore functions.\nThis also works by type.")),Object(o.b)("p",null,"More on each type is below, but we recommend continuing to\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/trace-driven-development"}),"Trace Driven Development")," and coming back when you\nare creating an endpoint."),Object(o.b)("hr",null),Object(o.b)("h2",{id:"canvas"},"Canvas"),Object(o.b)("p",null,"In Dark, your backend components appear in the browser, on a canvas. These are\nat: ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://darklang.com/a/username"}),"https://darklang.com/a/username")," or\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://darklang.com/a/username-canvasname"}),"https://darklang.com/a/username-canvasname"),".\nWe intend for you to only have one canvas per company or entirely separate\nproject. You can create any canvas by navigating to it."),Object(o.b)("p",null,"Your endpoints would appear at:\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://username-canvasname.builtwithdark.com/route"}),"https://username-canvasname.builtwithdark.com/route"),"\n(we can help you set up DNS if you want another domain to point at your canvas)."),Object(o.b)("p",null,"You can navigate the canvas via the left-hand sidebar, or via the omnibox\n(accessible using ",Object(o.b)("inlineCode",{parentName:"p"},"Cmd/Ctrl-k"),")."),Object(o.b)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/lJaIy6Z2V_g",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),Object(o.b)("hr",null),Object(o.b)("h2",{id:"rest-api-endpoints"},"REST API Endpoints"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"If you hit an endpoint that does not exist (see:\n",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/trace-driven-development"}),"Trace Driven Development"),"), the endpoint will\nappear in the 404 section."),Object(o.b)("li",{parentName:"ul"},"Support the standard REST protocols (GET, POST, PATCH, DELETE, PUT)."),Object(o.b)("li",{parentName:"ul"},"Accept URL parameters (ex: /profile/:username) and appear as variables within\nthe handler."),Object(o.b)("li",{parentName:"ul"},"Have implicit returns (see:\n",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/functional-aspects"}),"Functional Aspects of Dark"),"), and return JSON by\ndefault."),Object(o.b)("li",{parentName:"ul"},"All traces are available as dots on the left hand side. If you do not have a\ntrace selected, you will see a spinner for all live values.")),Object(o.b)("h2",{id:"background-workers"},"Background Workers"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Workers receive events via the ",Object(o.b)("strong",{parentName:"li"},"emit")," expression, and will appear in the 404\nsection if you emit to a non-existent worker."),Object(o.b)("li",{parentName:"ul"},"Run asynchronously and retry in case of failure.")),Object(o.b)("h2",{id:"cron"},"CRON"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Runs on a given schedule, selected by developer (every minute, hour, week,\netc).")),Object(o.b)("h2",{id:"repl"},"REPL"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Is triggered only by the developer and frequently relies on play buttons (see\n",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/trace-driven-development"}),"Trace Driven Development"),").")),Object(o.b)("h2",{id:"persistent-datastores"},"Persistent Datastores"),Object(o.b)("p",null,"In Dark, all datastores are a key-value store - a persistent hash-map/dictionary\n(not a relational database). When looking at a Datastore you\u2019ll see all handlers\nthat call the datastore."),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"/docs/img/backend/image3.png",alt:"backend/image3.png"}))),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/datastores"}),"Detailed datastore information"),"."),Object(o.b)("h2",{id:"deleted"},"Deleted"),Object(o.b)("p",null,"If you delete a handler, we save that code for you in the Deleted section of\nyour canvas. Everything you delete is sorted by type, and will remain in that\nsection until you remove it."),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"/docs/img/backend/Screen_Shot_2020-01-07_at_4.00.20_PM.png",alt:"backend/Screen_Shot_2020-01-07_at_4.00.20_PM.png"}))))}p.isMDXComponent=!0},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),b=p(n),d=a,m=b["".concat(l,".").concat(d)]||b[d]||u[d]||o;return n?r.a.createElement(m,c(c({ref:t},s),{},{components:n})):r.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=d;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:a,l[1]=c;for(var s=2;s<o;s++)l[s]=n[s];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);